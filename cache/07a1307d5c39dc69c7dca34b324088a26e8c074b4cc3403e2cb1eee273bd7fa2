{"children":[{"children":[],"uri":"https://www.notion.so/1fa75552ce71813281afcbf88c3eabb4","type":"bookmark","createdTime":1747841591662,"lastEditedTime":1747841591662,"link":"https://github.com/SantoshSrivatsan24/ece564_project1","title":"GitHub - SantoshSrivatsan24/ece564_project1: ECE 564 Project 1: Verilog description of the convolution Layer of a CNN","description":"ECE 564 Project 1: Verilog description of the convolution Layer of a CNN  - GitHub - SantoshSrivatsan24/ece564_project1: ECE 564 Project 1: Verilog description of the convolution Layer of a CNN","icon":"https://github.com/fluidicon.png","cover":"https://opengraph.githubassets.com/905b4eb5ff187b00afed6cb47dda753609c313c9d3cd97e53681eb7a325fd1d5/SantoshSrivatsan24/ece564_project1"},{"children":[],"uri":"https://www.notion.so/1fa75552ce71813daaa3c48d71af0c39","type":"text","createdTime":1747841591661,"lastEditedTime":1747841591661,"title":[]},{"children":[],"uri":"https://www.notion.so/1fa75552ce718184b9c2e8cabba74a5a","type":"table_of_contents","color":"gray","createdTime":1747841591661,"lastEditedTime":1747841591661},{"children":[],"uri":"https://www.notion.so/1fa75552ce718100860dfa3d80e0dc33","type":"heading","createdTime":1747841591660,"lastEditedTime":1747841591660,"title":[["Introduction"]],"depth":2},{"children":[],"uri":"https://www.notion.so/1fa75552ce71818c9083e365913c20f0","type":"text","createdTime":1747841591661,"lastEditedTime":1747841591661,"title":[["The goal of this project was to design the convolution and max-pool layers of a single layer CNN."]]},{"children":[],"uri":"https://www.notion.so/1fa75552ce71818aba04ec53bcf30bbe","type":"text","createdTime":1747841591660,"lastEditedTime":1747841591660,"title":[["I watched a really nice "],["YouTube video",[["a","https://www.youtube.com/watch?v=8rrHTtUzyZA"]]],[" to understand what exactly convolution means. In essence, convolution is an operation that takes two grids of values and combines them to produce another grid of values. The smaller grid of values is called a "],["kernel",[["i",null]]],[". And the larger grid could be an image."]]},{"children":[],"uri":"https://www.notion.so/1fa75552ce7181e8a21cefbea99c7377","type":"text","createdTime":1747841591660,"lastEditedTime":1747841591660,"title":[["A kernel is "],["convolved",[["i",null]]],[" with an input image by sliding it along the image, and multiplying and accumulating values in the kernel with the corresponding values in the input to produce a single value in the output image"]]},{"children":[],"uri":"https://www.notion.so/1fa75552ce7181ffa4aad578dd97b3c1","type":"image","createdTime":1747841591662,"lastEditedTime":1747841591662,"source":"https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F759af34e-dffa-4cd0-9da7-08e911d8cdf0%2Fa26cc74d-a6b4-4251-b04f-80b625ce9942%2FUntitled.png?width=1688&table=block&id=1fa75552-ce71-81ff-a4aa-d578dd97b3c1","caption":[["Fig. 1: Convolution between an image "],["I",[["i",null]]],[" and a kernel "],["K",[["i",null]]]],"width":1688,"height":-1,"fullWidth":false,"pageWidth":true,"aspectRatio":0.5023696682464455,"preserveScale":true},{"children":[],"uri":"https://www.notion.so/1fa75552ce7181a6b4fbe17d0f25dd21","type":"text","createdTime":1747841591661,"lastEditedTime":1747841591661,"title":[]},{"children":[],"uri":"https://www.notion.so/1fa75552ce71819c86b4d6cf1b71fe76","type":"text","createdTime":1747841591661,"lastEditedTime":1747841591661,"title":[["CNNs are widely used in applications such as pattern recognition (OCR). Accelerating them with the help of an ASIC is a worthwhile investment."]]},{"children":[],"uri":"https://www.notion.so/1fa75552ce7181939a23d78ac3651b67","type":"heading","createdTime":1747841591661,"lastEditedTime":1747841591661,"title":[["🧠 Design"]],"depth":2},{"children":[],"uri":"https://www.notion.so/1fa75552ce71816796acf3c05c689cf1","type":"text","createdTime":1747841591661,"lastEditedTime":1747841591661,"title":[["We were provided with three SRAMs for the inputs, weights, and outputs, and one scratchpad SRAM. "]]},{"children":[],"uri":"https://www.notion.so/1fa75552ce71814390e7df1b2401e065","type":"text","createdTime":1747841591662,"lastEditedTime":1747841591662,"title":[["My approach relied on a pattern in the way input matrices are stored in the SRAM to perform "],["4 matrix multiplications simultaneously.",[["b",null]]],[" i.e., the first element of the four input matrices is multiplied with the first kernel element. "]]},{"children":[],"uri":"https://www.notion.so/1fa75552ce71817baca6fe8ded3ad568","type":"text","createdTime":1747841591661,"lastEditedTime":1747841591661,"title":[["I picked values from the input matrix based on this pattern and stored them in a temporary buffer. The "],["blue",[["h","blue_background"]]],[", "],["green",[["h","teal_background"]]],[", "],["orange",[["h","orange_background"]]],[", and "],["red",[["h","red_background"]]],[" elements correspond to the first elements of each 3x3 matrix among a set of four 3x3 matrices."]]},{"children":[],"uri":"https://www.notion.so/1fa75552ce71810799c2de01d7f67145","type":"text","createdTime":1747841591661,"lastEditedTime":1747841591661,"title":[["The idea of the kernel "],["sliding",[["i",null]]],[" over the image is emulated by "],["shifting",[["i",null]]],[" this temporary buffer every clock cycle. This also ensures that the elements of interest are always at the "],["same location.",[["i",null]]]]},{"children":[],"uri":"https://www.notion.so/1fa75552ce718131b9f0e999a66e0c2d","type":"text","createdTime":1747841591661,"lastEditedTime":1747841591661,"title":[]},{"children":[{"children":[{"children":[],"uri":"https://www.notion.so/1fa75552ce71814b82a1f791fd14680a","type":"image","createdTime":1747841591663,"lastEditedTime":1747841591663,"source":"https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F759af34e-dffa-4cd0-9da7-08e911d8cdf0%2F33868251-7a66-44d5-ab58-e090dba95b8c%2FUntitled.jpeg?width=336&table=block&id=1fa75552-ce71-814b-82a1-f791fd14680a","caption":[["Fig. 2a: Picking a 4x4 set of values from an image to store into a buffer"]],"width":336,"height":-1,"fullWidth":false,"pageWidth":true,"aspectRatio":0.5015576323987538,"preserveScale":true}],"uri":"https://www.notion.so/1fa75552ce718117a1c7c0e3f8f0aa90","type":"column","createdTime":1747841591662,"lastEditedTime":1747841591662,"ratio":0.5},{"children":[{"children":[],"uri":"https://www.notion.so/1fa75552ce718116adc7f832a1011c46","type":"image","createdTime":1747841591664,"lastEditedTime":1747841591664,"source":"https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F759af34e-dffa-4cd0-9da7-08e911d8cdf0%2F35cd9d11-9439-4d3b-8347-1ebb99f3f294%2FUntitled.jpeg?width=1605&table=block&id=1fa75552-ce71-8116-adc7-f832a1011c46","caption":[["Fig. 2b: Shifting the input buffer "]],"width":1605,"height":-1,"fullWidth":false,"pageWidth":true,"aspectRatio":0.5015576323987538,"preserveScale":true}],"uri":"https://www.notion.so/1fa75552ce718159b03ec8222737e843","type":"column","createdTime":1747841591663,"lastEditedTime":1747841591663,"ratio":0.5}],"uri":"https://www.notion.so/1fa75552ce7181939705ca760b867ef7","type":"column_list","createdTime":1747841591661,"lastEditedTime":1747841591661},{"children":[],"uri":"https://www.notion.so/1fa75552ce7181c9b4c8d91951b7cc78","type":"heading","createdTime":1747841591662,"lastEditedTime":1747841591662,"title":[["🔨 Implementation"]],"depth":2},{"children":[],"uri":"https://www.notion.so/1fa75552ce718138a57fc4907c76b2c7","type":"heading","createdTime":1747841591661,"lastEditedTime":1747841591661,"title":[["FSMs"]],"depth":3},{"children":[],"uri":"https://www.notion.so/1fa75552ce71819a9d6be0b029dd0607","type":"text","createdTime":1747841591661,"lastEditedTime":1747841591661,"title":[["I had three major FSMs in my design:"]]},{"children":[{"children":[],"uri":"https://www.notion.so/1fa75552ce718128b4b9d834961dc9e7","type":"numbered_list","createdTime":1747841591663,"lastEditedTime":1747841591663,"title":[["The 4x4 values that I picked from the input matrix aren’t stored sequentially in the SRAM. The read address has to jump around and can’t simply be incremented."]]}],"uri":"https://www.notion.so/1fa75552ce7181e6a790f90c4fc75ddb","type":"numbered_list","createdTime":1747841591662,"lastEditedTime":1747841591662,"title":[["The first was to calculate the next "],["read_address",[["c",null]]],[" for the input matrix"]]},{"children":[{"children":[],"uri":"https://www.notion.so/1fa75552ce7181c6a960e4f29ef31894","type":"numbered_list","createdTime":1747841591663,"lastEditedTime":1747841591663,"title":[["The four (out of 16) inputs in this buffer that are multiplied with the weights are "],["always",[["i",null]]],[" in the same location."]]},{"children":[],"uri":"https://www.notion.so/1fa75552ce71811c8e30d14288f90a23","type":"numbered_list","createdTime":1747841591663,"lastEditedTime":1747841591663,"title":[["This is enforced by shifting the next set of inputs (to be multiplied with the weights) into this fixed location."]]},{"children":[],"uri":"https://www.notion.so/1fa75552ce7181ca99e5c9dfa07b8124","type":"numbered_list","createdTime":1747841591663,"lastEditedTime":1747841591663,"title":[["The inputs can either be shifted by 1 or 2 locations."]]},{"children":[],"uri":"https://www.notion.so/1fa75552ce7181faa92ff08b8b384e13","type":"numbered_list","createdTime":1747841591663,"lastEditedTime":1747841591663,"title":[["This FSM keeps track of whether to shift the buffer by 1 or 2 entries."]]},{"children":[],"uri":"https://www.notion.so/1fa75552ce7181869fa9f0376c795cc9","type":"numbered_list","createdTime":1747841591663,"lastEditedTime":1747841591663,"title":[["It also keeps track of the empty and full states of the buffer and indicates when multiplication is allowed (multiplication is only allowed when the buffer is full)"]]}],"uri":"https://www.notion.so/1fa75552ce7181a08528faadc715b4e6","type":"numbered_list","createdTime":1747841591661,"lastEditedTime":1747841591661,"title":[["The second FSM was to keep track of the state of the temporary buffer. "]]},{"children":[{"children":[],"uri":"https://www.notion.so/1fa75552ce71819aa2fff389b40a4544","type":"numbered_list","createdTime":1747841591663,"lastEditedTime":1747841591663,"title":[["The input SRAM could store more than one input matrix."]]}],"uri":"https://www.notion.so/1fa75552ce7181a2a8afeae9d85b4ad0","type":"numbered_list","createdTime":1747841591661,"lastEditedTime":1747841591661,"title":[["The third FSM was to keep track of when the convolution for "],["one",[["i",null]]],[" matrix had completed"]]},{"children":[],"uri":"https://www.notion.so/1fa75552ce718155af84fbf37cb7232f","type":"heading","createdTime":1747841591660,"lastEditedTime":1747841591660,"title":[["Microarchitecture"]],"depth":3},{"children":[],"uri":"https://www.notion.so/1fa75552ce7181c4883be0715b740d1c","type":"image","createdTime":1747841591661,"lastEditedTime":1747841591661,"source":"https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F759af34e-dffa-4cd0-9da7-08e911d8cdf0%2F1fa8358d-2ee6-4409-aaf0-6851e11f2809%2FUntitled.jpeg?width=4495&table=block&id=1fa75552-ce71-81c4-883b-e0715b740d1c","caption":[["Fig. 3: High-level architecture and description of data flow"]],"width":4495,"height":-1,"fullWidth":false,"pageWidth":true,"aspectRatio":0.4916573971078977,"preserveScale":true},{"children":[],"uri":"https://www.notion.so/1fa75552ce7181f58041e9c706a69844","type":"heading","createdTime":1747841591661,"lastEditedTime":1747841591661,"title":[["Datapath"]],"depth":3},{"children":[],"uri":"https://www.notion.so/1fa75552ce71819a864ccde4da68db93","type":"image","createdTime":1747841591661,"lastEditedTime":1747841591661,"source":"https://www.notion.so/signed/https%3A%2F%2Fprod-files-secure.s3.us-west-2.amazonaws.com%2F759af34e-dffa-4cd0-9da7-08e911d8cdf0%2F2513f927-318f-42f0-a8c3-7fcb49d4ec13%2FUntitled.jpeg?width=8085&table=block&id=1fa75552-ce71-819a-864c-cde4da68db93","caption":[["Fig. 4: Datapath"]],"width":8085,"height":-1,"fullWidth":false,"pageWidth":true,"aspectRatio":0.4489795918367347,"preserveScale":true},{"children":[],"uri":"https://www.notion.so/1fa75552ce71812e8d5ad37b5e240979","type":"text","createdTime":1747841591661,"lastEditedTime":1747841591661,"title":[]},{"children":[],"uri":"https://www.notion.so/1fa75552ce7181f89e00df3e85d5cf51","type":"heading","createdTime":1747841591661,"lastEditedTime":1747841591661,"title":[["Synthesis"]],"depth":2},{"children":[],"uri":"https://www.notion.so/1fa75552ce718175b386f1967a562e32","type":"text","createdTime":1747841591661,"lastEditedTime":1747841591661,"title":[["I synthesized my design using Synopsys Design Compiler. Synthesis helped me uncover pesky bugs such as unintentional latches, wired-or logic (signal driven by more than one piece of logic) and combinatorial loops in my design that may not have been caught by the Verilog compiler."]]},{"children":[],"uri":"https://www.notion.so/1fa75552ce7181f2a632dd423876836d","type":"heading","createdTime":1747841591661,"lastEditedTime":1747841591661,"title":[["Results"]],"depth":2},{"children":[],"uri":"https://www.notion.so/1fa75552ce71818c9190cf04195e58f8","type":"text","createdTime":1747841591661,"lastEditedTime":1747841591661,"title":[["My design achieved a clock period of 4.8 ns and had an area of 6612.2280 "],["⁍",[["e","\\mu m^2"]]],["."]]},{"children":[],"uri":"https://www.notion.so/1fa75552ce71818e876fcda7fe2fe68d","type":"divider","createdTime":1747841591661,"lastEditedTime":1747841591661},{"children":[],"uri":"https://www.notion.so/1fa75552ce71812c9536f0e819befbac","type":"text","createdTime":1747841591661,"lastEditedTime":1747841591661,"title":[]}],"uri":"https://www.notion.so/1fa75552ce7181c1a279dbe9002ab7a9","type":"page","createdTime":1747841591658,"lastEditedTime":1747841591658,"title":[["Implementing a Single-Layer CNN using Verilog"]],"icon":"🌄","fullWidth":false,"coverPosition":1,"properties":{"!`\"w":[["Yes"]],"'2]%":[["ece564_project1"]],":H`m":[["Yes"]],"{iD?":[["ASIC Design,ECE 564"]],"|Ay0":[["post"]]}}